<!DOCTYPE html>
<html>
  <%- include('partials/head'); -%>
<body>
  <%- include('partials/nav'); -%>
  <div class="index-controls">
    <div class="index-ctrl-icon">
      <a href="/new-happening">
        <span class="index-nav-icon">&#9998;</span>
        <span class="tool-tip-text">Create New Happening</span>
      </a>
    </div>
    <!-- Looks like you're using code from https://www.pair.com/support/kb/how-to-use-jquery-to-generate-modal-pop-up-when-clicked/ without attribution. Please put a comment any time you use large chunks of code! -->
    <!--Creates the popup body-->
    <div class="popup-overlay">
      <!--Creates the popup content-->
      <div class="popup-content">
        <h2>Instructions</h2>
        <p> Rambling Along is an awesome new app that allows you, the HAPPENER, to start a new HAPPENING (a story!) OR interactively add to an existing story by creating a snippet.  If you are the original creator you get to determine how many characters are in each snippet (not to exceed 500 characters) and how many snippets are in each HAPPENING (up to 25). Have fun, be creative, and enjoy the collaborative process with your family, friends, and enemies alike!</p>
        <!--popup's close button-->
        <button class="close">Start writing!</button>    
      </div>
    </div>
    <!--Content shown when popup is not displayed-->
    <div class="open index-ctrl-icon">
      <span class="index-nav-icon">!</span>
      <span class="tool-tip-text">Need Help?</span>
    </div>
    <div class="index-ctrl-icon" id="refresh">
      <span class="index-nav-icon">&#8635;</span>
      <span class="tool-tip-text">See Different Happenings</span>
    </div>
  </div>

  <section id="card-section">
    <% if (!happenings.length) { %>
      <div class="error-message">There are no Stories to Display. That is sad. Click the pencil or "New Happening" link to start one.</div>
    <% } %>
    <% happenings.forEach(story => { %>
      <%- include('partials/card', { story: story, location: 'index' }) %>
    <% }) %>
  </section>
  <%- include('partials/footer'); -%>
</body>